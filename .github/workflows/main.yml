name: main

on:
  pull_request: {}

jobs:
  call-workflow-setup-environment:
    uses: ./.github/workflows/setup-environment.yml
    with:
      tessellation_commit_hash: "c05df2d2b30e62ea64e50d64fb9463bbd2e2d015"
      use_merge_commit: true
    secrets: inherit

  call-governance-tests:
    needs: call-workflow-setup-environment
    uses: ./.github/workflows/governance_tests.yml
    secrets: inherit

  call-amm-operations-tests:
    needs: call-workflow-setup-environment
    uses: ./.github/workflows/amm_operations_test.yml
    secrets: inherit
